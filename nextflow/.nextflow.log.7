Mar-18 21:54:36.314 [main] DEBUG nextflow.cli.Launcher - $> nextflow analyze_pulses.nf --metadata data/hangman_signals.csv -c data/params_hangman_pan.config -with-conda true
Mar-18 21:54:36.389 [main] INFO  nextflow.cli.CmdRun - N E X T F L O W  ~  version 22.10.3
Mar-18 21:54:36.397 [main] DEBUG nextflow.plugin.PluginsFacade - Setting up plugin manager > mode=prod; embedded=false; plugins-dir=/Users/oakley/.nextflow/plugins; core-plugins: nf-amazon@1.11.1,nf-azure@0.14.2,nf-codecommit@0.1.2,nf-console@1.0.4,nf-ga4gh@1.0.4,nf-google@1.4.5,nf-tower@1.5.6,nf-wave@0.5.2
Mar-18 21:54:36.401 [main] INFO  org.pf4j.DefaultPluginStatusProvider - Enabled plugins: []
Mar-18 21:54:36.401 [main] INFO  org.pf4j.DefaultPluginStatusProvider - Disabled plugins: []
Mar-18 21:54:36.402 [main] INFO  org.pf4j.DefaultPluginManager - PF4J version 3.4.1 in 'deployment' mode
Mar-18 21:54:36.407 [main] INFO  org.pf4j.AbstractPluginManager - No plugins
Mar-18 21:54:36.415 [main] DEBUG nextflow.config.ConfigBuilder - User config file: /Users/oakley/Documents/GitHub/WALL-E/nextflow/data/params_hangman_pan.config
Mar-18 21:54:36.415 [main] DEBUG nextflow.config.ConfigBuilder - Parsing config file: /Users/oakley/Documents/GitHub/WALL-E/nextflow/data/params_hangman_pan.config
Mar-18 21:54:36.424 [main] DEBUG nextflow.config.ConfigBuilder - Applying config profile: `standard`
Mar-18 21:54:36.664 [main] DEBUG nextflow.cli.CmdRun - Applied DSL=2 from script declararion
Mar-18 21:54:36.671 [main] INFO  nextflow.cli.CmdRun - Launching `analyze_pulses.nf` [nice_linnaeus] DSL2 - revision: d29136b14d
Mar-18 21:54:36.672 [main] DEBUG nextflow.plugin.PluginsFacade - Plugins default=[]
Mar-18 21:54:36.672 [main] DEBUG nextflow.plugin.PluginsFacade - Plugins resolved requirement=[]
Mar-18 21:54:36.675 [main] DEBUG nextflow.secret.LocalSecretsProvider - Secrets store: /Users/oakley/.nextflow/secrets/store.json
Mar-18 21:54:36.676 [main] DEBUG nextflow.secret.SecretsLoader - Discovered secrets providers: [nextflow.secret.LocalSecretsProvider@49faf066] - activable => nextflow.secret.LocalSecretsProvider@49faf066
Mar-18 21:54:36.702 [main] DEBUG nextflow.Session - Session UUID: 6ec4228d-ed2f-448e-8e07-a5601de90e00
Mar-18 21:54:36.702 [main] DEBUG nextflow.Session - Run name: nice_linnaeus
Mar-18 21:54:36.702 [main] DEBUG nextflow.Session - Executor pool size: 10
Mar-18 21:54:36.706 [main] DEBUG nextflow.util.ThreadPoolBuilder - Creating thread pool 'FileTransfer' minSize=10; maxSize=30; workQueue=LinkedBlockingQueue[10000]; allowCoreThreadTimeout=false
Mar-18 21:54:36.716 [main] DEBUG nextflow.cli.CmdRun - 
  Version: 22.10.3 build 5834
  Created: 21-11-2022 21:37 UTC (13:37 PDT)
  System: Mac OS X 13.2.1
  Runtime: Groovy 3.0.13 on OpenJDK 64-Bit Server VM 17.0.3+7-LTS
  Encoding: UTF-8 (UTF-8)
  Process: 8883@gamera.eemb.ucsb.edu [128.111.226.15]
  CPUs: 10 - Mem: 32 GB (1.8 GB) - Swap: 0 (0)
Mar-18 21:54:36.722 [main] DEBUG nextflow.Session - Work-dir: /Users/oakley/Documents/GitHub/WALL-E/nextflow/work [Mac OS X]
Mar-18 21:54:36.736 [main] DEBUG nextflow.executor.ExecutorFactory - Extension executors providers=[]
Mar-18 21:54:36.740 [main] DEBUG nextflow.Session - Observer factory: DefaultObserverFactory
Mar-18 21:54:36.752 [main] DEBUG nextflow.cache.CacheFactory - Using Nextflow cache factory: nextflow.cache.DefaultCacheFactory
Mar-18 21:54:36.756 [main] DEBUG nextflow.util.CustomThreadPool - Creating default thread pool > poolSize: 11; maxThreads: 1000
Mar-18 21:54:36.784 [main] DEBUG nextflow.Session - Session start
Mar-18 21:54:37.057 [main] DEBUG nextflow.script.ScriptRunner - > Launching execution
Mar-18 21:54:37.119 [main] DEBUG nextflow.executor.ExecutorFactory - << taskConfig executor: null
Mar-18 21:54:37.120 [main] DEBUG nextflow.executor.ExecutorFactory - >> processorType: 'local'
Mar-18 21:54:37.122 [main] DEBUG nextflow.executor.Executor - [warm up] executor > local
Mar-18 21:54:37.124 [main] DEBUG n.processor.LocalPollingMonitor - Creating local task monitor for executor 'local' > cpus=10; memory=32 GB; capacity=10; pollInterval=100ms; dumpInterval=5m
Mar-18 21:54:37.154 [main] DEBUG nextflow.executor.ExecutorFactory - << taskConfig executor: null
Mar-18 21:54:37.154 [main] DEBUG nextflow.executor.ExecutorFactory - >> processorType: 'local'
Mar-18 21:54:37.156 [main] DEBUG nextflow.executor.ExecutorFactory - << taskConfig executor: null
Mar-18 21:54:37.157 [main] DEBUG nextflow.executor.ExecutorFactory - >> processorType: 'local'
Mar-18 21:54:37.159 [main] DEBUG nextflow.executor.ExecutorFactory - << taskConfig executor: null
Mar-18 21:54:37.159 [main] DEBUG nextflow.executor.ExecutorFactory - >> processorType: 'local'
Mar-18 21:54:37.161 [main] DEBUG nextflow.executor.ExecutorFactory - << taskConfig executor: null
Mar-18 21:54:37.161 [main] DEBUG nextflow.executor.ExecutorFactory - >> processorType: 'local'
Mar-18 21:54:37.162 [main] DEBUG nextflow.executor.ExecutorFactory - << taskConfig executor: null
Mar-18 21:54:37.163 [main] DEBUG nextflow.executor.ExecutorFactory - >> processorType: 'local'
Mar-18 21:54:37.164 [main] DEBUG nextflow.executor.ExecutorFactory - << taskConfig executor: null
Mar-18 21:54:37.164 [main] DEBUG nextflow.executor.ExecutorFactory - >> processorType: 'local'
Mar-18 21:54:37.166 [main] DEBUG nextflow.executor.ExecutorFactory - << taskConfig executor: null
Mar-18 21:54:37.166 [main] DEBUG nextflow.executor.ExecutorFactory - >> processorType: 'local'
Mar-18 21:54:37.167 [main] DEBUG nextflow.Session - Workflow process names [dsl2]: visualize_coordinates, find_contours, rectify, visualize, visualize_segments, undistort, parallax_depth, segment_contours
Mar-18 21:54:37.167 [main] DEBUG nextflow.Session - Igniting dataflow network (9)
Mar-18 21:54:37.169 [main] DEBUG nextflow.processor.TaskProcessor - Starting process > undistort
Mar-18 21:54:37.170 [main] DEBUG nextflow.processor.TaskProcessor - Starting process > rectify
Mar-18 21:54:37.170 [main] DEBUG nextflow.processor.TaskProcessor - Starting process > find_contours
Mar-18 21:54:37.170 [main] DEBUG nextflow.processor.TaskProcessor - Starting process > segment_contours
Mar-18 21:54:37.170 [main] DEBUG nextflow.processor.TaskProcessor - Starting process > parallax_depth
Mar-18 21:54:37.170 [main] DEBUG nextflow.processor.TaskProcessor - Starting process > visualize
Mar-18 21:54:37.170 [main] DEBUG nextflow.processor.TaskProcessor - Starting process > visualize_segments
Mar-18 21:54:37.170 [main] DEBUG nextflow.processor.TaskProcessor - Starting process > visualize_coordinates
Mar-18 21:54:37.170 [main] DEBUG nextflow.script.ScriptRunner - > Awaiting termination 
Mar-18 21:54:37.170 [main] DEBUG nextflow.Session - Session await
Mar-18 21:54:37.207 [Actor Thread 5] DEBUG nextflow.conda.CondaCache - conda found local env for environment=conda-forge::opencv=4.5.0 conda-forge::numpy=1.19.4; path=/Users/oakley/Documents/GitHub/WALL-E/nextflow/work/conda/env-c185fe4baf89519afaa336aee909e5f9
Mar-18 21:54:37.235 [Task submitter] DEBUG n.executor.local.LocalTaskHandler - Launch cmd line: /bin/bash -ue .command.run
Mar-18 21:54:37.236 [Task submitter] INFO  nextflow.Session - [c1/3eaba2] Submitted process > undistort (1)
Mar-18 21:54:40.446 [Task monitor] DEBUG n.processor.TaskPollingMonitor - Task completed > TaskHandler[id: 1; name: undistort (1); status: COMPLETED; exit: 0; error: -; workDir: /Users/oakley/Documents/GitHub/WALL-E/nextflow/work/c1/3eaba2e5c434ee5cc559c9546a3079]
Mar-18 21:54:40.479 [Task submitter] DEBUG n.executor.local.LocalTaskHandler - Launch cmd line: /bin/bash -ue .command.run
Mar-18 21:54:40.479 [Task submitter] INFO  nextflow.Session - [5d/47c2ee] Submitted process > rectify (1)
Mar-18 21:54:47.177 [Task monitor] DEBUG n.processor.TaskPollingMonitor - Task completed > TaskHandler[id: 2; name: rectify (1); status: COMPLETED; exit: 0; error: -; workDir: /Users/oakley/Documents/GitHub/WALL-E/nextflow/work/5d/47c2eeea866ab61390f97c31c79ca0]
Mar-18 21:54:47.192 [Task submitter] DEBUG n.executor.local.LocalTaskHandler - Launch cmd line: /bin/bash -ue .command.run
Mar-18 21:54:47.192 [Task submitter] INFO  nextflow.Session - [55/095bfb] Submitted process > find_contours (1)
Mar-18 21:54:48.666 [Task monitor] DEBUG n.processor.TaskPollingMonitor - Task completed > TaskHandler[id: 3; name: find_contours (1); status: COMPLETED; exit: 0; error: -; workDir: /Users/oakley/Documents/GitHub/WALL-E/nextflow/work/55/095bfb3534813fd34d2b9142c4717d]
Mar-18 21:54:48.674 [Actor Thread 5] INFO  nextflow.conda.CondaCache - Creating env using conda: conda-forge::matplotlib=3.3.3 conda-forge::pandas conda-forge::seaborn=0.12.2  conda-forge::numpy [cache /Users/oakley/Documents/GitHub/WALL-E/nextflow/work/conda/env-abcf0210a448daf56c4fc827e77d2384]
Mar-18 21:54:48.707 [Actor Thread 7] INFO  nextflow.conda.CondaCache - Creating env using conda: conda-forge::matplotlib=3.3.3 conda-forge::pandas conda-forge::seaborn=0.12.2  conda-forge::numpy conda-forge::scipy=1.6.0 [cache /Users/oakley/Documents/GitHub/WALL-E/nextflow/work/conda/env-776adc193cb615e8579b2c1c45c0334e]
Mar-18 21:55:10.027 [Actor Thread 5] DEBUG nextflow.conda.CondaCache - 'conda' create complete env=conda-forge::matplotlib=3.3.3 conda-forge::pandas conda-forge::seaborn=0.12.2  conda-forge::numpy path=/Users/oakley/Documents/GitHub/WALL-E/nextflow/work/conda/env-abcf0210a448daf56c4fc827e77d2384
Mar-18 21:55:10.033 [Task submitter] DEBUG n.executor.local.LocalTaskHandler - Launch cmd line: /bin/bash -ue .command.run
Mar-18 21:55:10.033 [Task submitter] INFO  nextflow.Session - [7c/2c9d5d] Submitted process > visualize (1)
Mar-18 21:55:10.686 [Actor Thread 7] DEBUG nextflow.conda.CondaCache - 'conda' create complete env=conda-forge::matplotlib=3.3.3 conda-forge::pandas conda-forge::seaborn=0.12.2  conda-forge::numpy conda-forge::scipy=1.6.0 path=/Users/oakley/Documents/GitHub/WALL-E/nextflow/work/conda/env-776adc193cb615e8579b2c1c45c0334e
Mar-18 21:55:10.693 [Task submitter] DEBUG n.executor.local.LocalTaskHandler - Launch cmd line: /bin/bash -ue .command.run
Mar-18 21:55:10.694 [Task submitter] INFO  nextflow.Session - [f3/6a629a] Submitted process > segment_contours (1)
Mar-18 21:55:18.759 [Task monitor] DEBUG n.processor.TaskPollingMonitor - Task completed > TaskHandler[id: 5; name: segment_contours (1); status: COMPLETED; exit: 1; error: -; workDir: /Users/oakley/Documents/GitHub/WALL-E/nextflow/work/f3/6a629ae5f2ecbd3d9aab3d0f06d242]
Mar-18 21:55:18.765 [Task monitor] ERROR nextflow.processor.TaskProcessor - Error executing process > 'segment_contours (1)'

Caused by:
  Process `segment_contours (1)` terminated with an error exit status (1)

Command executed:

  segment_pulses.py -f contours_hanpan1.tab -n hanpan1 -HPP 0.5 -HPD 2 -XMAX 10 -YMAX 10 -SRMAX 5 -PDMIN 5 -PSD 500 -PFD 500 -XD 250

Command exit status:
  1

Command output:
      Close enough in x and y. Adding in same pulse
  	index:98 frame:175 Cam:left difF:1 difX:18 difY:45 olddiff:1
      ****Pulse too distant in  x or y -- while dividing pulses
  	index:99 frame:176 Cam:left difF:1 difX:0 difY:0 olddiff:1
      Close enough in x and y. Adding in new pulse
  	index:100 frame:177 Cam:left difF:1 difX:0 difY:0 olddiff:1
      Close enough in x and y. Adding in same pulse
  	index:101 frame:178 Cam:left difF:1 difX:0 difY:0 olddiff:1
      Close enough in x and y. Adding in same pulse
  	index:102 frame:193 Cam:left difF:1 difX:4 difY:38 olddiff:1
      ****Pulse too distant in  x or y -- while dividing pulses
  	index:103 frame:194 Cam:left difF:1 difX:0 difY:0 olddiff:1
      Close enough in x and y. Adding in new pulse
  	index:104 frame:195 Cam:left difF:1 difX:0 difY:0 olddiff:1
      Close enough in x and y. Adding in same pulse
  	index:105 frame:196 Cam:left difF:1 difX:0 difY:0 olddiff:1
      Close enough in x and y. Adding in same pulse
  	index:106 frame:249 Cam:left difF:1 difX:267 difY:115 olddiff:1
      ****Pulse too distant in  x or y -- while dividing pulses
  	index:107 frame:250 Cam:left difF:1 difX:0 difY:0 olddiff:1
      Close enough in x and y. Adding in new pulse
  p12 is too short to be a pulse based on PDMIN = 5
  p14 is too short to be a pulse based on PDMIN = 5
  p15 is too short to be a pulse based on PDMIN = 5
  p7 is too short to be a pulse based on PDMIN = 5
  p8 is too short to be a pulse based on PDMIN = 5
  ALL RIGHT PULSES
    camera pulse  start  finish  minx  maxx  modex  miny  maxy  modey spulse
  0  right    p2     25      35   248   249    249   150   150    150   none
  1  right    p3     65      75   247   250    247   137   137    137   none
  2  right    p4     91      98   236   236    236   161   161    161   none
  3  right    p5    113     120   215   216    215   192   192    192   none
  4  right    p6    132     138   222   222    222   236   236    236   none
  ALL LEFT PULSES
    camera pulse  start  finish  minx  maxx  modex  miny  maxy  modey spulse
  0   left    p1     28      38   317   318    317   150   151    150   none
  1   left   p10     90      97   309   309    309   161   162    161   none
  2   left   p11    112     119   291   291    291   191   192    191   none
  3   left   p13    153     159   291   294    294   274   274    274   none
  4   left    p9     68      75   321   322    321   138   138    138   none
  LEFT PAIRLESS
    camera pulse  start  finish  minx  maxx  modex  miny  maxy  modey spulse
  3   left   p13    153     159   291   294    294   274   274    274   none
  RIGHT PAIRLESS
    camera pulse  start  finish  minx  maxx  modex  miny  maxy  modey spulse
  4  right    p6    132     138   222   222    222   236   236    236   none
  [[  6.  87. 134. 209.]
   [138.  71.   2.  77.]
   [212. 145.  72.   3.]
   [ 95.   4.  69. 144.]]

Command error:
      Close enough in x and y. Adding in new pulse
  	index:100 frame:177 Cam:left difF:1 difX:0 difY:0 olddiff:1
      Close enough in x and y. Adding in same pulse
  	index:101 frame:178 Cam:left difF:1 difX:0 difY:0 olddiff:1
      Close enough in x and y. Adding in same pulse
  	index:102 frame:193 Cam:left difF:1 difX:4 difY:38 olddiff:1
      ****Pulse too distant in  x or y -- while dividing pulses
  	index:103 frame:194 Cam:left difF:1 difX:0 difY:0 olddiff:1
      Close enough in x and y. Adding in new pulse
  	index:104 frame:195 Cam:left difF:1 difX:0 difY:0 olddiff:1
      Close enough in x and y. Adding in same pulse
  	index:105 frame:196 Cam:left difF:1 difX:0 difY:0 olddiff:1
      Close enough in x and y. Adding in same pulse
  	index:106 frame:249 Cam:left difF:1 difX:267 difY:115 olddiff:1
      ****Pulse too distant in  x or y -- while dividing pulses
  	index:107 frame:250 Cam:left difF:1 difX:0 difY:0 olddiff:1
      Close enough in x and y. Adding in new pulse
  p12 is too short to be a pulse based on PDMIN = 5
  p14 is too short to be a pulse based on PDMIN = 5
  p15 is too short to be a pulse based on PDMIN = 5
  p7 is too short to be a pulse based on PDMIN = 5
  p8 is too short to be a pulse based on PDMIN = 5
  ALL RIGHT PULSES
    camera pulse  start  finish  minx  maxx  modex  miny  maxy  modey spulse
  0  right    p2     25      35   248   249    249   150   150    150   none
  1  right    p3     65      75   247   250    247   137   137    137   none
  2  right    p4     91      98   236   236    236   161   161    161   none
  3  right    p5    113     120   215   216    215   192   192    192   none
  4  right    p6    132     138   222   222    222   236   236    236   none
  ALL LEFT PULSES
    camera pulse  start  finish  minx  maxx  modex  miny  maxy  modey spulse
  0   left    p1     28      38   317   318    317   150   151    150   none
  1   left   p10     90      97   309   309    309   161   162    161   none
  2   left   p11    112     119   291   291    291   191   192    191   none
  3   left   p13    153     159   291   294    294   274   274    274   none
  4   left    p9     68      75   321   322    321   138   138    138   none
  LEFT PAIRLESS
    camera pulse  start  finish  minx  maxx  modex  miny  maxy  modey spulse
  3   left   p13    153     159   291   294    294   274   274    274   none
  RIGHT PAIRLESS
    camera pulse  start  finish  minx  maxx  modex  miny  maxy  modey spulse
  4  right    p6    132     138   222   222    222   236   236    236   none
  [[  6.  87. 134. 209.]
   [138.  71.   2.  77.]
   [212. 145.  72.   3.]
   [ 95.   4.  69. 144.]]
  Traceback (most recent call last):
    File "/Users/oakley/Documents/GitHub/WALL-E/nextflow/bin/segment_pulses.py", line 272, in <module>
      row_ind, col_ind = linear_sum_assignment(pulmatrix)
  NameError: name 'linear_sum_assignment' is not defined

Work dir:
  /Users/oakley/Documents/GitHub/WALL-E/nextflow/work/f3/6a629ae5f2ecbd3d9aab3d0f06d242

Tip: you can replicate the issue by changing to the process work dir and entering the command `bash .command.run`
Mar-18 21:55:18.767 [Task monitor] DEBUG nextflow.Session - Session aborted -- Cause: Process `segment_contours (1)` terminated with an error exit status (1)
Mar-18 21:55:18.772 [main] DEBUG nextflow.Session - Session await > all processes finished
Mar-18 21:55:18.772 [main] DEBUG nextflow.Session - Session await > all barriers passed
Mar-18 21:55:18.774 [main] WARN  n.processor.TaskPollingMonitor - Killing running tasks (1)
Mar-18 21:55:18.781 [main] DEBUG nextflow.trace.WorkflowStatsObserver - Workflow completed > WorkflowStats[succeededCount=3; failedCount=1; ignoredCount=0; cachedCount=0; pendingCount=0; submittedCount=0; runningCount=0; retriesCount=0; abortedCount=1; succeedDuration=11.1s; failedDuration=8s; cachedDuration=0ms;loadCpus=0; loadMemory=0; peakRunning=2; peakCpus=2; peakMemory=0; ]
Mar-18 21:55:18.989 [main] DEBUG nextflow.cache.CacheDB - Closing CacheDB done
Mar-18 21:55:19.006 [main] DEBUG nextflow.script.ScriptRunner - > Execution complete -- Goodbye
